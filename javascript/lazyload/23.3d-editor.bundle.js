"use strict";(self.webpackChunksd_webui_3d_editor=self.webpackChunksd_webui_3d_editor||[]).push([[23],{6023:function(s,t,e){e.r(t),e.d(t,{MTLLoader:function(){return r}});var a=e(9477);class r extends a.aNw{constructor(s){super(s)}load(s,t,e,r){const i=this,o=""===this.path?a.Zp0.extractUrlBase(s):this.path,n=new a.hH6(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(s,(function(e){try{t(i.parse(e,o))}catch(t){r?r(t):console.error(t),i.manager.itemError(s)}}),e,r)}setMaterialOptions(s){return this.materialOptions=s,this}parse(s,t){const e=s.split("\n");let a={};const r=/\s+/,o={};for(let s=0;s<e.length;s++){let t=e[s];if(t=t.trim(),0===t.length||"#"===t.charAt(0))continue;const i=t.indexOf(" ");let n=i>=0?t.substring(0,i):t;n=n.toLowerCase();let l=i>=0?t.substring(i+1):"";if(l=l.trim(),"newmtl"===n)a={name:l},o[l]=a;else if("ka"===n||"kd"===n||"ks"===n||"ke"===n){const s=l.split(r,3);a[n]=[parseFloat(s[0]),parseFloat(s[1]),parseFloat(s[2])]}else a[n]=l}const n=new i(this.resourcePath||t,this.materialOptions);return n.setCrossOrigin(this.crossOrigin),n.setManager(this.manager),n.setMaterials(o),n}}class i{constructor(s="",t={}){this.baseUrl=s,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:a.Wl3,this.wrap=void 0!==this.options.wrap?this.options.wrap:a.rpg}setCrossOrigin(s){return this.crossOrigin=s,this}setManager(s){this.manager=s}setMaterials(s){this.materialsInfo=this.convert(s),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(s){if(!this.options)return s;const t={};for(const e in s){const a=s[e],r={};t[e]=r;for(const s in a){let t=!0,e=a[s];const i=s.toLowerCase();switch(i){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(e=[e[0]/255,e[1]/255,e[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===e[0]&&0===e[1]&&0===e[2]&&(t=!1)}t&&(r[i]=e)}}return t}preload(){for(const s in this.materialsInfo)this.create(s)}getIndex(s){return this.nameLookup[s]}getAsArray(){let s=0;for(const t in this.materialsInfo)this.materialsArray[s]=this.create(t),this.nameLookup[t]=s,s++;return this.materialsArray}create(s){return void 0===this.materials[s]&&this.createMaterial_(s),this.materials[s]}createMaterial_(s){const t=this,e=this.materialsInfo[s],r={name:s,side:this.side};function i(s,e){if(r[s])return;const i=t.getTextureParams(e,r),o=t.loadTexture((n=t.baseUrl,"string"!=typeof(l=i.url)||""===l?"":/^https?:\/\//i.test(l)?l:n+l));var n,l;o.repeat.copy(i.scale),o.offset.copy(i.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,"map"!==s&&"emissiveMap"!==s||(o.colorSpace=a.KI_),r[s]=o}for(const s in e){const t=e[s];let o;if(""!==t)switch(s.toLowerCase()){case"kd":r.color=(new a.Ilk).fromArray(t).convertSRGBToLinear();break;case"ks":r.specular=(new a.Ilk).fromArray(t).convertSRGBToLinear();break;case"ke":r.emissive=(new a.Ilk).fromArray(t).convertSRGBToLinear();break;case"map_kd":i("map",t);break;case"map_ks":i("specularMap",t);break;case"map_ke":i("emissiveMap",t);break;case"norm":i("normalMap",t);break;case"map_bump":case"bump":i("bumpMap",t);break;case"map_d":i("alphaMap",t),r.transparent=!0;break;case"ns":r.shininess=parseFloat(t);break;case"d":o=parseFloat(t),o<1&&(r.opacity=o,r.transparent=!0);break;case"tr":o=parseFloat(t),this.options&&this.options.invertTrProperty&&(o=1-o),o>0&&(r.opacity=1-o,r.transparent=!0)}}return this.materials[s]=new a.xoR(r),this.materials[s]}getTextureParams(s,t){const e={scale:new a.FM8(1,1),offset:new a.FM8(0,0)},r=s.split(/\s+/);let i;return i=r.indexOf("-bm"),i>=0&&(t.bumpScale=parseFloat(r[i+1]),r.splice(i,2)),i=r.indexOf("-s"),i>=0&&(e.scale.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),i=r.indexOf("-o"),i>=0&&(e.offset.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),e.url=r.join(" ").trim(),e}loadTexture(s,t,e,r,i){const o=void 0!==this.manager?this.manager:a.tEQ;let n=o.getHandler(s);null===n&&(n=new a.dpR(o)),n.setCrossOrigin&&n.setCrossOrigin(this.crossOrigin);const l=n.load(s,e,r,i);return void 0!==t&&(l.mapping=t),l}}}}]);